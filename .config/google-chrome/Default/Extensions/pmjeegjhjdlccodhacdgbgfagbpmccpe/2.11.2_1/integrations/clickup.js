function initializeBodyObserver(){const t=new MutationObserver(applyThemeDependentStyles),e=document.body;t.observe(e,{childList:!0,attributes:!0})}async function applyThemeDependentStyles(){const t=document.body.classList.contains("dark-theme");applyStyles(t?"\n\t#clockify-manual-input-form input { background: rgb(42, 46, 52) !important; color: #f5f4f3 !important; border: 0.5px solid rgb(60, 65, 74) !important; }\n\t.clockify-button-inactive { color: #f5f4f3 !important; }\n\t.clockify-manual-entry-header-text { color: #333; }\n":"\n\t.clockify-input { background: white !important; color: rgb(42, 46, 52) !important; border: 1px solid #f7f7f7 !important; }\n\t.clockify-button-inactive { color: #444444 !important };\n","clockify-theme-dependent-styles")}function clickupVersion(){return document.documentElement.classList.contains("cu-v2")?2:3}function makeSmallButton(){const t=setInterval((()=>{const e=$(".small.clockifyButton span.clockify-button-inactive.clockify-button-inactive-span");e&&(e.remove(),clearInterval(t))}),100)}function getDashboardFolderAndListName(t){const e=t.closest("cu-list-group")?.parentElement,n=textList(".cu-list-group__category-name.ng-star-inserted",e),a=n.length>1,o=text(".cu-list-group__name",e);return{dashboardFolderName:a?n[0]:null,listName:o}}function getProjectAndTask(t){const e=text('[data-test="selected_groupBy"]'),{dashboardFolderName:n,listName:a}=getDashboardFolderAndListName(t),o=text(".nav-category__header_opened .nav-category__name-text span");return"Status"!==e?{projectName:"",taskName:""}:o?{projectName:o,taskName:a}:n?{projectName:n,taskName:a}:{projectName:a,taskName:""}}clockifyButton.render(".cu-task-row__main:not(.clockify)",{observe:!0},(async t=>{if(3!==clickupVersion())return;await timeout({milliseconds:500});const e=t=>{if(!(text('[data-test="selected_groupBy"]')??text('[data-test="cu2-views-dropdown__groupBy"]')).includes("Status"))return{folderName:null,listName:null};let e,n;const a=t.closest(".cu-list-group"),o=textList("cu-location-header-breadcrumbs cu-breadcrumb-item"),c=text(".cu-list-group__header-breadcrumbs",a)?.split("/");if(3===o.length)e=o[1],n=o[2];else if(2===o.length){const t=!c?.length;e=o[1],n=t?null:c[0]}else 1===o.length&&(3===c.length?(e=c[1],n=c[2]):2===c.length?(e=c[0],n=c[1]):1===c.length&&(e=c[0],n=null));return{folderName:e,listName:n}},n=e(t).folderName,a=e(t).listName,o={description:()=>`${text(".cu-task-row-main__link-text-inner",t)} | #${t.closest("cu-task-row").getAttribute("data-id")}`,projectName:()=>n||a,taskName:()=>a||null,tagNames:()=>textList(".cu-tags-select__name-container > span",t),small:!0},c=clockifyButton.createButton(o);c.style.position="absolute",c.style.left="15px",c.style.zIndex="9999",t.prepend(c)})),clockifyButton.render('.cu-task-view__container [data-test="task-view-header__breadcrumbs"]:not(.clockify)',{observe:!0},(async t=>{await timeout({milliseconds:500}),$("#clockifyButton",t)?.remove();const e=t.closest(".cu-task-view__container"),n=$$(".cu-task-view-breadcrumbs__text"),a=3===n.length,o=a?n[1].textContent:null,c=a?n[2].textContent:n[1].textContent,i={description:()=>document.title,projectName:()=>o??c,taskName:()=>o?c:"",tagNames:()=>textList(".cu-tags-badge__inner span",e)},s=clockifyButton.createButton(i),l=clockifyButton.createInput(i),r=createTag("div","clockify-widget-container");s.style.display="inline-flex",s.style.paddingLeft="10px",s.style.marginRight="15px",s.style.cursor="pointer",r.append(s),r.append(l),t.append(r)})),clockifyButton.render('[data-test="task-container"]:not(.clockify)',{observe:!0},(async t=>{if(await timeout({milliseconds:500}),$("#clockifyButton",t))return;makeSmallButton();const e=text(".breadcrumbs__link_folder",t),n=text(".breadcrumbs__link_list",t),a={description:document.title,projectName:e??n,taskName:e?n:"",tagNames:textList("div.cu-tags-view__container div.cu-tags-select__name",t)},o=clockifyButton.createButton(a),c=clockifyButton.createInput(a),i=createTag("div","clockify-widget-container");i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="space-between",i.style.width="250px",i.style.marginLeft="10px",i.append(o),i.append(c),$(".task-container__header").append(i)})),clockifyButton.render(".cu-task-row__container:not(.clockify)",{observe:!0},(async t=>{if(2!==clickupVersion())return;await timeout({milliseconds:500});const{projectName:e,taskName:n}=getProjectAndTask(t),a={description:()=>`${text(".cu-task-row-main__link-text-inner",t)} | #${t.getAttribute("data-task")}`,projectName:e,tagNames:()=>textList(".cu-tags-select__name",t),taskName:n,small:!0},o=clockifyButton.createButton(a);o.style.position="absolute",o.style.right="-15px",o.style.top="8px",o.style.zIndex="99999",$("cu-task-row-main",t).append(o)})),applyStyles("\n\t.cu-v3 .cu-task-row__status { padding-left: 5px; }\n\t.cu-v3 .cu-task-row__open-subtasks { margin-left: -36px !important; }\n","clockify-space-for-small-btn"),applyStyles("\n\t.cu-task-row__container #clockifySmallButton:not(.active) { display: none; }\n\t.cu-task-row__container:hover #clockifySmallButton { display: inline-flex; }\n","clockify-on-hover-effect"),initializeBodyObserver();